(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{30:function(e,t,n){},51:function(e,t,n){"use strict";n.r(t);var c=n(1),s=n.n(c),r=n(25),a=n.n(r),i=(n(30),n(6)),o=n(2),l=n(7),d=n.n(l),j=n(8),u=n(14),b=n(3),h=n(10),O=n.n(h),x=n(0),f=s.a.createContext({});function p(e,t){var n=s.a.useState((function(){var n=window.localStorage.getItem(t);return null!==n?JSON.parse(n):e})),c=Object(b.a)(n,2),r=c[0],a=c[1];return s.a.useEffect((function(){window.localStorage.setItem(t,JSON.stringify(r))}),[t,r]),[r,a]}function m(e){var t=e.children,n=p(null,"authenticatedUser"),s=Object(b.a)(n,2),r=s[0],a=s[1],i=p(null,"accessToken"),l=Object(b.a)(i,2),d=l[0],j=l[1],u=Object(c.useState)(""),h=Object(b.a)(u,2),m=h[0],v=h[1],g=Object(c.useState)(!1),w=Object(b.a)(g,2),y=w[0];w[1],Object(o.h)();O.a.interceptors.response.use((function(e){return e}),(function(e){throw console.log(e.data),e}));var k={setAuthInfo:function(e){var t=e.user,n=e.token;a(t),j(n),O.a.setToken(n)},axios:O.a,authenticatedUser:r,setAuthenticatedUser:a,initAxios:function(){O.a.setToken(d)},error:m,setError:v,resetPassword:function(e){},updateEmail:function(e){},updatePassword:function(e){}};return Object(x.jsx)(f.Provider,{value:k,children:!y&&t})}function v(){var e=Object(c.useContext)(f),t=Object(c.useState)([]),n=Object(b.a)(t,2),s=n[0],r=n[1],a=Object(c.useState)(!1),i=Object(b.a)(a,2),o=i[0],l=i[1];function h(){return(h=Object(j.a)(d.a.mark((function t(n,c){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(a=s[n].id)){t.next=5;break}return c.target.disabled=!0,t.next=5,e.axios.delete("http://localhost/360wellness/test/backend/public/api/todo/"+a).then((function(e){if(!e.data.success)throw console.error(e.data),new Error("Error while deleteing todo");alert("Deleted successfully!")})).finally((function(){return c.target.disabled=!1}));case 5:r((function(e){return e.filter((function(e,t,c){return t!=n}))}));case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(c.useEffect)((function(){e.initAxios(),l(!0),e.axios.get("http://localhost/360wellness/test/backend/public/api/todos").then((function(e){e.data.success?r(e.data.data.todos):console.error(e.data)})).finally((function(){return l(!1)}))}),[]),Object(x.jsx)(x.Fragment,{children:Object(x.jsxs)("div",{className:"text-center",children:[Object(x.jsx)("button",{onClick:function(){r([].concat(Object(u.a)(s),[{id:"",content:""}]))},children:"New Todo"}),Object(x.jsxs)("table",{style:{maxHeight:"700px",width:"1200px",margin:"auto"},children:[Object(x.jsx)("thead",{children:Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{width:"10%",children:"ID"}),Object(x.jsx)("td",{width:"70%",children:"Todo"}),Object(x.jsx)("td",{width:"20%",children:"Actions"})]})}),Object(x.jsx)("tbody",{children:o?Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{}),Object(x.jsx)("td",{className:"text-center",children:Object(x.jsx)("h1",{children:"Loading..."})}),Object(x.jsx)("td",{})]}):s.map((function(t,n){return Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:t.id||"NA"}),Object(x.jsx)("td",{children:Object(x.jsx)("textarea",{value:t.content,onInput:function(e){return function(e,t){var n=e.target.value;r((function(e){var c=Object(u.a)(e);return c[t].content=n,c}))}(e,n)}})}),Object(x.jsxs)("td",{children:[Object(x.jsx)("button",{onClick:function(t){!function(t,n){var c=s[t],a=c.id,i=c.content;a?(n.target.disabled=!0,e.axios.put("http://localhost/360wellness/test/backend/public/api/todo/"+a,{content:i}).then((function(e){e.data.success?alert("Updated successfully!"):console.error(e.data)})).finally((function(){return n.target.disabled=!1}))):(n.target.disabled=!0,e.axios.post("http://localhost/360wellness/test/backend/public/api/todo",{content:i}).then((function(e){e.data.success?(r((function(n){var c=Object(u.a)(n);return c[t].id=e.data.data.todo.id,c})),alert("Saved successfully!")):console.error(e.data)})).finally((function(){return n.target.disabled=!1})))}(n,t)},children:" Save"}),Object(x.jsx)("button",{onClick:function(e){!function(e,t){h.apply(this,arguments)}(n,e)},children:" Delete"})]})]},n)}))})]})]})})}function g(){Object(c.useRef)();var e=Object(c.useRef)(),t=Object(c.useRef)(),n=(Object(c.useRef)(),Object(c.useContext)(f)),s=Object(c.useState)(!1),r=Object(b.a)(s,2),a=r[0],l=r[1],u=Object(o.h)();function h(){return(h=Object(j.a)(d.a.mark((function c(s){return d.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:s.preventDefault(),n.setError(""),l(!0),n.axios.post("http://localhost/360wellness/test/backend/public/api/login",{email:e.current.value,password:t.current.value}).then((function(e){e.data.success?(n.setAuthInfo({user:e.data.data.user,token:e.data.data.access_token}),setTimeout((function(){u("/")}),1e3)):(console.error(e.data),n.setError("Wrong email or password!"))}));case 4:case"end":return c.stop()}}),c)})))).apply(this,arguments)}return Object(x.jsxs)("form",{onSubmit:function(e){return h.apply(this,arguments)},children:[Object(x.jsx)("h2",{className:"text-center",children:"Login In"}),n.error&&Object(x.jsx)("div",{className:"text-danger text-center",children:n.error}),Object(x.jsx)("table",{style:{maxWigth:"50%",margin:"auto"},children:Object(x.jsxs)("tbody",{children:[Object(x.jsxs)("tr",{id:"email",children:[Object(x.jsx)("td",{children:Object(x.jsx)("label",{children:"Email"})}),Object(x.jsx)("td",{children:Object(x.jsx)("input",{type:"email",ref:e,required:!0})})]}),Object(x.jsxs)("tr",{id:"password",children:[Object(x.jsx)("td",{children:Object(x.jsx)("label",{children:"Password"})}),Object(x.jsx)("td",{children:Object(x.jsx)("input",{type:"password",ref:t,required:!0})})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{}),Object(x.jsx)("td",{children:Object(x.jsx)("button",{disabled:a,className:"w-100",type:"submit",children:"Login"})})]}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:Object(x.jsx)("div",{className:"text-center",children:"Don't have an account?"})}),Object(x.jsx)("td",{children:Object(x.jsx)(i.b,{to:"/signup",children:"Sign Up"})})]})]})})]})}function w(){var e=Object(c.useRef)(),t=Object(c.useRef)(),n=Object(c.useRef)(),s=Object(c.useRef)(),r=Object(c.useContext)(f),a=Object(c.useState)(!1),l=Object(b.a)(a,2),u=l[0],h=l[1],O=Object(o.h)();function p(){return(p=Object(j.a)(d.a.mark((function c(a){var i;return d.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(a.preventDefault(),r.setError(""),n.current.value===s.current.value){c.next=4;break}return c.abrupt("return",r.setError("Passwords do not match"));case 4:return h(!0),c.next=7,r.axios.post("http://localhost/360wellness/test/backend/public/api/signup",{name:e.current.value,email:t.current.value,password:n.current.value,confirm_password:s.current.value});case 7:(i=c.sent).data.success?r.setAuthInfo({user:i.data.data.user,token:i.data.data.access_token}):console.error(i.data),O("/");case 10:case"end":return c.stop()}}),c)})))).apply(this,arguments)}return Object(x.jsxs)("form",{onSubmit:function(e){return p.apply(this,arguments)},children:[Object(x.jsx)("h2",{className:"text-center",children:"Sign Up"}),r.error&&Object(x.jsx)("div",{className:"text-danger text-center",children:r.error}),Object(x.jsx)("table",{style:{maxWigth:"50%",margin:"auto"},children:Object(x.jsxs)("tbody",{children:[Object(x.jsxs)("tr",{id:"name",children:[Object(x.jsx)("td",{children:Object(x.jsx)("label",{children:"Name"})}),Object(x.jsx)("td",{children:Object(x.jsx)("input",{type:"text",ref:e,required:!0})})]}),Object(x.jsxs)("tr",{id:"email",children:[Object(x.jsx)("td",{children:Object(x.jsx)("label",{children:"Email"})}),Object(x.jsx)("td",{children:Object(x.jsx)("input",{type:"email",ref:t,required:!0})})]}),Object(x.jsxs)("tr",{id:"password",children:[Object(x.jsx)("td",{children:Object(x.jsx)("label",{children:"Password"})}),Object(x.jsx)("td",{children:Object(x.jsx)("input",{type:"password",ref:n,required:!0})})]}),Object(x.jsxs)("tr",{id:"password-confirm",children:[Object(x.jsx)("td",{children:Object(x.jsx)("label",{children:"Password Confirmation"})}),Object(x.jsx)("td",{children:Object(x.jsx)("input",{type:"password",ref:s,required:!0})})]}),Object(x.jsx)("tr",{children:Object(x.jsx)("td",{children:Object(x.jsx)("button",{disabled:u,className:"w-100",type:"submit",children:"Sign Up"})})}),Object(x.jsxs)("tr",{children:[Object(x.jsx)("td",{children:Object(x.jsx)("div",{className:"text-center",children:"Already have an account?"})}),Object(x.jsx)("td",{children:Object(x.jsx)(i.b,{to:"/login",children:"Log In"})})]})]})})]})}function y(e){var t=e.children,n=Object(c.useContext)(f),s=Object(c.useState)(!1),r=Object(b.a)(s,2),a=r[0],o=r[1];return Object(x.jsxs)(x.Fragment,{children:[Object(x.jsxs)("div",{className:"text-center",style:{marginBottom:"30px"},children:[Object(x.jsx)("h1",{children:" Dashboard"}),Object(x.jsxs)("h4",{children:[" Hi ",n.authenticatedUser.name,"!"]}),Object(x.jsx)(i.b,{className:"btn",to:"/update-profile",children:" Profile"}),Object(x.jsx)(i.b,{className:"btn",to:"/",children:" Todos"}),Object(x.jsx)("a",{className:"btn",disabled:a,href:"#",onClick:function(e){e.preventDefault(),e.target.classList.toggle("disabled"),o(!0),n.axios.post("http://localhost/360wellness/test/backend/public/api/logout").then((function(e){e.data.success?n.setAuthInfo({user:null,token:null}):console.error(e.data)})).finally((function(){o(!1)}))},children:" Logout"})]}),t]})}function k(e){Object.assign({},e);return Object(c.useContext)(f).authenticatedUser?Object(x.jsx)(y,{children:Object(x.jsx)(o.b,{})}):Object(x.jsx)(o.a,{to:"/login"})}O.a.setToken=function(e){void 0!==this.tokenInterceptor&&this.interceptors.request.eject(this.tokenInterceptor),this.tokenInterceptor=this.interceptors.request.use((function(t){return e?t.headers.Authorization="Bearer ".concat(e):delete t.headers.Authorization,t}))};var S=n(15);function N(){var e=this,t=Object(c.useContext)(f),n=Object(c.useState)(!1),s=Object(b.a)(n,2),r=s[0],a=s[1],i=Object(c.useState)({name:{value:"",validate:function(){return""!==e.value.trim()}}}),o=Object(b.a)(i,2),l=o[0],d=o[1];return Object(c.useEffect)((function(){t.initAxios(),d((function(e){var n=Object(S.a)({},e);return Object.keys(n).forEach((function(e){t.authenticatedUser[e]&&(n[e].value=t.authenticatedUser[e])})),n}))}),[t.authenticatedUser]),Object(x.jsxs)("div",{className:"text-center",children:[Object(x.jsx)("h1",{children:" UpdateProfile"}),Object(x.jsxs)("form",{onSubmit:function(e){e.preventDefault(),Object.keys(l).forEach((function(e){l[e].validate.bind(l[e])})),a(!0),t.axios.post("http://localhost/360wellness/test/backend/public/api/update-profile").then((function(e){e.data.success?(t.setAuthenticatedUser((function(e){var t=Object(S.a)({},e);return Object.keys(l).forEach((function(e){t[e]=l[e].value})),t})),alert("Profile updated successfully")):console.error(e.data)})).finally((function(){a(!1)}))},children:[Object(x.jsx)("input",{name:"name",onInput:function(e){var t=e.target,n=t.name,c=t.value;d((function(e){var t=Object(S.a)({},e);return t[n].value=c,t}))},value:l.name.value}),Object(x.jsx)("button",{disabled:r,type:"submit",children:" Update"})]})]})}var A=function(){return Object(x.jsxs)("div",{className:"App",children:[Object(x.jsx)("header",{className:"App-header",children:Object(x.jsx)("h1",{className:"text-center",children:"React Todo App"})}),Object(x.jsx)(i.a,{children:Object(x.jsx)(m,{children:Object(x.jsxs)(o.e,{children:[Object(x.jsxs)(o.c,{exact:!0,path:"/",element:Object(x.jsx)(k,{}),children:[Object(x.jsx)(o.c,{exact:!0,path:"/",element:Object(x.jsx)(v,{})}),Object(x.jsx)(o.c,{exact:!0,path:"/update-profile",element:Object(x.jsx)(N,{})})]}),Object(x.jsx)(o.c,{exact:!0,path:"/signup",element:Object(x.jsx)(w,{})}),Object(x.jsx)(o.c,{exact:!0,path:"/login",element:Object(x.jsx)(g,{})})]})})})]})},E=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,52)).then((function(t){var n=t.getCLS,c=t.getFID,s=t.getFCP,r=t.getLCP,a=t.getTTFB;n(e),c(e),s(e),r(e),a(e)}))};a.a.render(Object(x.jsx)(s.a.StrictMode,{children:Object(x.jsx)(A,{})}),document.getElementById("root")),E()}},[[51,1,2]]]);
//# sourceMappingURL=main.28b529ff.chunk.js.map